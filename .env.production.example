# ============================================================
# Rezeis Panel - Production Environment Configuration
# ============================================================
# Copy this file to .env and modify values for production
# ============================================================

# ============================================================
# APP - General Application Settings
# ============================================================
NODE_ENV=production
APP_DOMAIN=your-domain.com

# ============================================================
# PORTS - Service Ports (统一端口配置)
# Backend API: 4000
# Frontend Web: 4001
# Mini App: 4002
# WebSocket: 4003
# ============================================================
APP_BACKEND_PORT=4000
APP_FRONTEND_PORT=4001
APP_MINIAPP_PORT=4002
APP_WEBSOCKET_PORT=4003

# ============================================================
# DATABASE - PostgreSQL Configuration
# ============================================================
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=altshop_panel
DATABASE_USER=altshop
DATABASE_PASSWORD=change_this_to_secure_password_32_chars_min
# Optional: override full URL
# DATABASE_URL=postgresql://user:pass@host:5432/dbname

# Connection Pool Settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30

# ============================================================
# VALKEY - Cache & Session Store (Redis-compatible)
# ============================================================
VALKEY_HOST=valkey
VALKEY_PORT=6379
VALKEY_DB=0
VALKEY_PASSWORD=change_this_to_secure_valkey_password
VALKEY_MAX_CONNECTIONS=10
# Full URL (constructed from above or override)
VALKEY_URL=valkey://${VALKEY_HOST}:${VALKEY_PORT}/${VALKEY_DB}

# Redis (backward compatibility - will be deprecated)
REDIS_HOST=${VALKEY_HOST}
REDIS_PORT=${VALKEY_PORT}
REDIS_NAME=${VALKEY_DB}
REDIS_PASSWORD=${VALKEY_PASSWORD}
REDIS_URL=redis://${VALKEY_HOST}:${VALKEY_PORT}/${VALKEY_DB}

# ============================================================
# JWT - Authentication Configuration
# ============================================================
JWT_SECRET=your-super-secret-jwt-key-min-32-characters-long
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-chars
JWT_REFRESH_EXPIRES_IN=30d

# ============================================================
# REMNAWAVE - VPN Panel Integration (关键配置)
# ============================================================
# Host: Use 'remnawave' for Docker internal, or domain for external
REMNAWAVE_HOST=remnawave
REMNAWAVE_PORT=3000
# API Token from Remnawave panel settings
REMNAWAVE_TOKEN=your_remnawave_api_token_here
# Webhook Secret for receiving events from Remnawave
REMNAWAVE_WEBHOOK_SECRET=your_webhook_secret_here
# Optional: Caddy token for X-Api-Key header
REMNAWAVE_CADDY_TOKEN=
# Optional: Cookie for auth (format: name=value)
REMNAWAVE_COOKIE=

# Sync Settings
REMNAWAVE_SYNC_INTERVAL_MINUTES=5
REMNAWAVE_SYNC_ENABLED=true

# ============================================================
# TELEGRAM - Bot Integration
# ============================================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_WEBHOOK_SECRET=your_telegram_webhook_secret_here
TELEGRAM_MINI_APP_URL=https://t.me/your_bot/miniapp

# ============================================================
# ACCESS - Super Admin Configuration
# ============================================================
# Super Admin Telegram ID(s) - full access to all settings
# Comma-separated for multiple IDs (e.g., "123456789,987654321")
SUPER_ADMIN_TELEGRAM_ID=123456789

# ============================================================
# SECURITY - Rate Limiting & CORS
# ============================================================
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000
# Comma-separated list of allowed origins
CORS_ORIGINS=https://your-domain.com,https://admin.your-domain.com

# ============================================================
# LOGGING - Application Logs
# ============================================================
LOG_LEVEL=info
LOG_FORMAT=json

# ============================================================
# FEATURE FLAGS - Enable/Disable Features
# ============================================================
FEATURE_PAYMENTS_ENABLED=true
FEATURE_REFERRAL_ENABLED=true
FEATURE_PARTNER_ENABLED=true
FEATURE_WEBSOCKET_ENABLED=true

# ============================================================
# BACKUP - Automated Backups (аналогично altshop боту)
# ============================================================
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_TIME=03:00
BACKUP_MAX_KEEP=7
BACKUP_LOCATION=./backups
BACKUP_COMPRESSION=true

# What to backup: all OR comma-separated list
# users, subscriptions, transactions, plans, partners, referrals, etc.
BACKUP_INCLUDE_TABLES=all

# Send backups to Telegram
BACKUP_TELEGRAM_ENABLED=true
BACKUP_TELEGRAM_CHAT_ID=-1001234567890
BACKUP_TELEGRAM_TOPIC_ID=

# S3 storage (optional - AWS, MinIO, Yandex)
BACKUP_S3_ENABLED=false
BACKUP_S3_BUCKET=altshop-backups
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=
BACKUP_S3_ENDPOINT=

# ============================================================
# SSL - Let's Encrypt (Optional)
# ============================================================
# SSL_EMAIL=admin@your-domain.com
# DOMAIN=your-domain.com
